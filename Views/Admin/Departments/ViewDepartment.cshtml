@model AttendenceManagementSystem.Models.Department
@{
    ViewData["Title"] = "Department Details";
}

<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0 text-gray-800">
            <i class="fas fa-building me-2"></i>Department Details
        </h1>
        <div>
            <a class="btn btn-primary" asp-action="EditDepartment" asp-route-id="@Model.Id">
                <i class="fas fa-edit me-2"></i>Edit
            </a>
            <a class="btn btn-secondary" asp-action="Departments">
                <i class="fas fa-arrow-left me-2"></i>Back to List
            </a>
        </div>
    </div>

    <div class="row">
        <!-- Department Basic Info -->
        <div class="col-md-6">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Basic Information</h6>
                </div>
                <div class="card-body">
                    <dl class="row mb-0">
                        <dt class="col-sm-4">Department Name:</dt>
                        <dd class="col-sm-8">@Model.Name</dd>

                        <dt class="col-sm-4">Department Code:</dt>
                        <dd class="col-sm-8">
                            @if (!string.IsNullOrEmpty(Model.Code))
                            {
                                <span class="badge bg-primary">@Model.Code</span>
                            }
                            else
                            {
                                <span class="text-muted">Not specified</span>
                            }
                        </dd>

                        <dt class="col-sm-4">Created At:</dt>
                        <dd class="col-sm-8">@Model.CreatedAt.ToString("MMM dd, yyyy hh:mm tt")</dd>
                    </dl>
                </div>
            </div>
        </div>

        <!-- Department Statistics -->
        <div class="col-md-6">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Statistics</h6>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-6 mb-3">
                            <div class="p-3 bg-primary bg-opacity-10 rounded">
                                <h3 class="text-primary mb-0">@(Model.Batches?.Count ?? 0)</h3>
                                <small class="text-muted">Batches</small>
                            </div>
                        </div>
                        <div class="col-6 mb-3">
                            <div class="p-3 bg-info bg-opacity-10 rounded">
                                <h3 class="text-info mb-0">@(Model.Courses?.Count ?? 0)</h3>
                                <small class="text-muted">Courses</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-3 bg-success bg-opacity-10 rounded">
                                <h3 class="text-success mb-0">@(Model.Teachers?.Count ?? 0)</h3>
                                <small class="text-muted">Teachers</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="p-3 bg-warning bg-opacity-10 rounded">
                                <h3 class="text-warning mb-0">@(Model.Students?.Count ?? 0)</h3>
                                <small class="text-muted">Students</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Batches List -->
    @if (Model.Batches != null && Model.Batches.Any())
    {
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">
                    <i class="fas fa-users me-2"></i>Batches
                </h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Batch Year</th>
                                <th>Year</th>
                                <th>Created Date</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var batch in Model.Batches)
                            {
                                <tr>
                                    <td>@batch.Year</td>
                                    <td>@batch.Year</td>
                                    <td>@batch.CreatedAt.ToString("MMM dd, yyyy")</td>
                                    <td>@(batch.Description ?? "N/A")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }

    <!-- Courses List -->
    @if (Model.Courses != null && Model.Courses.Any())
    {
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">
                    <i class="fas fa-book me-2"></i>Courses
                </h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Course Name</th>
                                <th>Course Code</th>
                                <th>Credits</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var course in Model.Courses)
                            {
                                <tr>
                                    <td>@course.Title</td>
                                    <td><span class="badge bg-info">@course.Code</span></td>
                                    <td>@course.Credits</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }

    <!-- Teachers List -->
    @if (Model.Teachers != null && Model.Teachers.Any())
    {
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">
                    <i class="fas fa-chalkboard-teacher me-2"></i>Teachers
                </h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var teacher in Model.Teachers)
                            {
                                <tr>
                                    <td>@teacher.FullName</td>
                                    <td>@(teacher.Email ?? "N/A")</td>
                                    <td>@(teacher.PhoneNumber ?? "N/A")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }

    <!-- Students List -->
    @if (Model.Students != null && Model.Students.Any())
    {
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">
                    <i class="fas fa-user-graduate me-2"></i>Students
                </h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Roll Number</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Batch</th>
                                <th>Section</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var student in Model.Students)
                            {
                                <tr>
                                    <td><span class="badge bg-primary">@student.RollNumber</span></td>
                                    <td>@student.FullName</td>
                                    <td>@(student.Email ?? "N/A")</td>
                                    <td>@(student.Batch?.Year ?? "N/A")</td>
                                    <td>@(student.Section?.Name ?? "N/A")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }

    @if ((Model.Batches == null || !Model.Batches.Any()) && 
         (Model.Courses == null || !Model.Courses.Any()) && 
         (Model.Teachers == null || !Model.Teachers.Any()) && 
         (Model.Students == null || !Model.Students.Any()))
    {
        <div class="card shadow mb-4">
            <div class="card-body text-center py-5">
                <i class="fas fa-inbox fa-3x text-gray-300 mb-3"></i>
                <h5 class="text-gray-500">No Associated Data</h5>
                <p class="text-muted">This department doesn't have any batches, courses, teachers, or students yet.</p>
            </div>
        </div>
    }
</div>
