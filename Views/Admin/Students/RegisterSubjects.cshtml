@{
    var student = ViewBag.Student as AttendenceManagementSystem.Models.Student;
    var courses = ViewBag.Courses as List<AttendenceManagementSystem.Models.Course>;
    var enrolledCourseIds = ViewBag.EnrolledCourseIds as List<int>;
}

@model List<int>
@{
    ViewData["Title"] = "Register Subjects";
}

<div class="container mt-4">
    <h2>Register Subjects for @student?.FullName (@student?.RollNumber)</h2>
    <form asp-action="RegisterSubjects" asp-route-id="@student?.Id" method="post">
        <div class="mb-3">
            <label class="form-label">Select Subjects for Department: <strong>@student?.Department?.Name</strong></label>
            <div class="row">
                @foreach (var course in courses)
                {
                    <div class="col-md-4 mb-2">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="selectedCourseIds" value="@course.Id" id="course_@course.Id" @(enrolledCourseIds.Contains(course.Id) ? "checked" : "") />
                            <label class="form-check-label" for="course_@course.Id">
                                @course.Title (@course.Code)
                            </label>
                        </div>
                    </div>
                }
            </div>
        </div>
        <button type="submit" class="btn btn-success">Register Selected Subjects</button>
        <a asp-action="Students" class="btn btn-secondary ms-2">Cancel</a>
    </form>
</div>
